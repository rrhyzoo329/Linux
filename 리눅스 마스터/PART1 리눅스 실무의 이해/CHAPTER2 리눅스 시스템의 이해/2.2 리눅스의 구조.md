# PART1 리눅스 실무의 이해[CHAPTER2 리눅스 시스템의 이해]


<br>


### 2.2 리눅스의 구조


- 부트 매니저
    - 부팅을 도와주는 역할을 하는 프로그램,컴퓨터를 처음 시작했을 때 가장 먼저 실행되는 소프트웨어 프로그램
    - 부트로더(BootLoader)라고도 부르며, 하드 디스크의 맨 앞쪽 MBR(Master Boot Record)에 설치, 크기는 512byte
    - MBR은 부트 섹터로 디스크의 첫 번째 섹터에 해당
    - 대표적인 부트 매니저 : LILO(Linux Loader), GRUB(Grand Unified BootLoader)
    - GRUB
        - GNU 프로젝트에서 만든 부트로더
        - 다양한 파일 시스템을 지원하고, 부팅 할 때는 커널 인자를 조정하여 동적 부팅을 지원
            - GRUB 부트 화면

                - 일정 시간 별다른 키 입력이 없으면 기본 모드로 부팅 
                - 제시된 목록에서 방향키 + [Enter]: 선택한 운영체제로 부팅 
                - 메뉴 화면 e, c키: 커널 인자값 조정한 부팅환경 수정 가능 
            - GRUB 부팅 모드 
                - 편집 모드
                    - GRUB 목록에서 [e]키 : 설정된 항목들이 나타남
                    - cursor키로 이동 수정 가능
                    - [ctrl] +[x] : 재부팅, [ctrl]+[c] : 관련 설정 명령 프로프트 모드창 호출 , [ESC] 사용 취소 
                - 명령 프롬프트 모드
                    - GRUB 부트 화면 [c]키 : 명령프롬프트 모드
                    - [TAB]키 : 명령행 자동완성 기능 사용 가능, [ESC] 사용 취소
                    - boot 입력 : 순차적으로 입력하고 맨 마지막 라인에서 "boot"입력
                - GRUB 환경 설정 파일 
                    - CentOS7 : 'boot/grub2/grub.cfg', 심볼릭 링크 파일인 '/etc/grub2.cfg'도 가능 
                         - GRUB 이전 버전의 menu.lst 파일을 대체
                    - "grub.cfg" 파일은 셸 스크립트 형태로 작성되어 있고 '/etc/grub.d'의 파일들과 '/etc/default/grub' 파일을 참고하여 동작
                    - 일반적으로 /etc/default/grub 파일을 편집하고 update-grub 명령을 실행하여 해당 편집 내용을 grub.cfg에 적용 

                        - GRUB_TIMEOUT=5 : GRUB 부트 화면에서 대기하는 시간을 초단위로 지정
                        - GRUB_DISTRIBUTOR="$(sed 's, release.*)"GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)" : GRUB 부트화면에서 각 entry 앞에 보여질 리눅스 배포판의 이름을 추출할 때 사용한다. 현재 설정파일은 '/etc/system-release' 파일에서 'CentOS Linux'라는 문자열이 추출
                        - GRUB_DEFAULT=saved : 
                            - 부트 화면에 제시된 목록 중 기본으로 부팅될 모드를 선택
                            - 일반적으로 인덱스값으로 0번부터 N번까지의 정수값을 입력
                            - 현재 설정된 'saved'는 기본 메뉴 목록이 'GRUB_SAFEDEFAULT' 또는 'grub-set-default'에 의해 저장
                        - GRUB_DISABLE_SUBMENU=true : 
                            - 서브 메뉴의 사용 여부를 설정 
                            - grub-mkconfig에서 버전 번호가 가장 높은 커널을 최상위 메뉴 항목으로 생성
                            - 다른 모드의 커널 또는 복구 모드에 대한 대체 항목을 하위 메뉴로 생성 ('true'로 설정하면 하위 메뉴를 생성하지 않음)
                        - GRUB_TERMINAL_OUTPUT="console" : GRUB이 출력되는 터미널 장치를 설정, console로 출력
                        - GRUB_CMDLINE_LINUX="crashkernel=auto rhgb quiet" : 커널 인자값을 지정하는 항목
                        - GRUB_DISABLE_RECOVERY="true": 부트 메뉴 목록에 복구 모드의 표시 여부를 지정('true'로 설정하면 목록에 나타나지 않음)
                        
                - GRUB 관련 명령어 : grub2-mkconfig
            - GRUB 활용
                - root 패스워드를 잊어버렸을 경우                          
