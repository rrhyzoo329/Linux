# PART1 리눅스 실무의 이해[CHAPTER2 리눅스 시스템의 이해]


<br>


### 2.4 셸(shell)

#### 2.4.1 셸의 이해

- 셸의 개념 및 특징
    1. 셸이란?
        + 명령어와 프로그램을 실행할 때 사용하는 인터페이스
        + 커널에서 분리된 별도의 프로그램으로 다양한 종류 셸이 존재
        + 자체 프로그래밍 기능이 있어 프로그래밍 작성가능
        + 초기화 파일 기능을 이용해 사용자 환경을 설정 가능
        
        - 셸 위치

        ![shell](https://user-images.githubusercontent.com/93310395/223718507-2ff8da8a-5ce4-4ff5-9f35-43eb7d269388.png)

        - 셸 실행

        ![shell2](https://user-images.githubusercontent.com/93310395/223724936-19c0735f-aac8-4ce4-bd41-2d0f6a3c64b6.png)

    2. 주요 셸의 기능 
        
        - 본 셸(Bourne Shell - sh) 
            - 최초의 본격적인 쉘로 1977년 Stephen Bourne이 개발
            - 시스템 관리 작업을 수행하는 많은 쉘 스크립트들은 본 쉘을 기반으로 작동
            - 대부분의 유닉스 시스템에 기본적으로 설치되어있으나, 솔라리스 11에서는 본쉘(/usr/bin/sh)이 콘쉘로 대체
        - C셸(C Shell:csh)
            - 1978년 캘리포니아(버클리)대학교에서 Bill Joy가 개발
            - 본쉘의 기능을 확장한 것으로 앨리어스나 히스토리 같은 사용자 편의 기능을 포함
            - 크기가 커지고 처리 속도도 느려졌다는 단점이 있지만, 편리한 기능이 때문에 일반 사용자가 즐겨 사용
        - 배시 쉘(Bourne Again Shell : bash)
            - 1988년 본 쉘을 기반으로 브라이언 폭스에 의해 개발
            - 본 쉘과 호환성을 유지하면서 C쉘, 콘 쉘의 편리한 기능도 포함
            - GNU 따르는 공개 소프트웨어, 리눅스의 기본 쉘로 동작    
        - 콘 쉘(Korn Shell : ksh)
            - 1983년 AT&T 벨 연구소의 David Korn)이 개발
            - 히스토리기능, 앨리어스 기능 등 C쉘의 특징들도 모두 제공하면서 처리 속도도 빠름 
        - 그외 dash, tcsh

- 셸의 확인과 변경       
    1. 셸의 확인

        ![shellecho](https://user-images.githubusercontent.com/93310395/223741743-f86a5b96-6888-46fe-948f-e731a7a72757.JPG)
    
        - #echo $SHELL, #env|grep SHELL
        - 변경 가능한 셸확인 : chsh-l 실행, cat/etc/shells

    2. 셸의 변경
        - $ chsh : chsh [옵션] [계정명] [셸]
            - '-s' : 지정하는 셸을 앞으로 사용할 로그인 셸로 변경
            - '-l' : /etc/shells 파일 내용과 동일한 내용

            |옵션|설명|
            |---|---|
            |-s|변경하고자하는 셸 명시(--shell)|
            |-l|사용 가능한 셸의 목록 출력(--list-shells)|
            |-u|chsh 명령어 사용법 출력(--help)|
            |-v|설치한 패키지의 버전 출력(--version)|    

            ![shellck](https://user-images.githubusercontent.com/93310395/223739204-770376c7-fdb1-4130-b594-e8465d704a1d.png)
            - usermod : 관리자 환경에서 지정된 계정의 정보를 변경
                - usermod [옵션] [계정명]
            
             -  ex) dash셸로 변경 : chsh -s /bin/dash [사용자 이름]

    3. 사용자의 로그인 셸 정보 확인
        - /etc/passwd : 시스템에 등록된 사용자의 정보들이 담겨있는 파일

        ````
        root:x:0:0:root:/root:/bin/bashroot:x:0:0:root:/root:/bin/bash

        ```` 

        |필드|설명|
        |------|---|
        |사용자 계정명|맨 앞에 필드는 사용자의 계정명|
        |패스워드| x가 의미하는 바는 사용자의 패스워드가 /etc/shadow에 암호화되어 저장되어있다는 뜻|
        |UID|사용자의 user id, 관리자 계정(Root)은 UID가 0|
        |GID|사용자의 그룹 ID,관리자 그룹(Root)의 GID는 0|
        |comment|사용자와 관련한 기타 정보로 일반적으로 사용자의 이름|
        |홈디렉터리|관리자 계정의 홈 디렉토리는 /root이며, 다른 사용자의 홈 디렉토리는 기본으로 /home/ 하위에 계정명으로 위치|
        |로그인 셸|보통 사용자의 쉘은 성능이 우수한 bash쉘을 사용, 로그인이 불필요한 계정도 있는데요. 이때는 이 필드가 /usr/sbin/nologin, /bin/false, /sbin/nologin 등으로 표기|

- 셀 변수와 환경 변수 
    1. 셀변수
        - bash에서 적용되는 지역 변수 
        - 특정한 셸에서만 적용되는 변수를 말함
        - 부모셸에서만 사용하며 자식셸에는 상속되지 않음

        |입력|설명|
        |------|---|
        |변수명 지정|변수명= 값, set 변수명=값(공백X)|
        |변수명 해제|unset 변수명|
        |변수값 출력|$ 변수명|
        |변수 확인|echo $변수명|
        |사용자 정의 모든 변수|#set|
        |환경변수로 변경|export 환경변수명|

        ![echo](https://user-images.githubusercontent.com/93310395/223937433-31cead91-1dde-4f97-97f6-c5fe9c4b81a4.JPG)

    2. 환경변수
        - 시스템 전체 적용되는 전역 변수
        - 프롬프트 변경, PATH 변경 등과 같이 셸의 환경을 정의하는 중요한 역할을 수행하는 변수
        - 미리 예약된 변수명 사용, 대문자로 된 변수로 구성
        - 설정된 전체 환경변수 값 확인 : $ env, $ env | grep 환경변수명
        - $ export 환경변수명=값


         |입력|설명|
        |------|---|
        |변수명 지정(일시)|export 변수명= 값(공백X)|
        |변수명 지정(영구)|./etc/bashrc 추가|
        |변수명 해제|uset 변수명|
        |변수값 출력|$ 변수명|
        |변수 확인|$ echo $변수명, env | grep 변수명|
        |사용자 정의 모든 변수|#set|
        
    3. 주요환경변수

        |변  수|내용|
        |------|---|
        |HOME|홈디렉터리|
        |PATH|실행 파일 디렉터리 경로|
        |LANG|지원 언어|
        |TERM|로그인 터미널 정보|
        |PWD|사용장의 현재 작업 디렉터리|
        |SHELL|사용자의 로그인 셸|
        |USER|사용자 명|
        |DISPLAY|X윈도에서 프로그램 실행 시 출력되는 창|
        |PS1|프롬프트 변수|
        |PS2|2차 프롬프트 변수|
        |HISFTILE|히스토리 파일의 절대 경로|
        |HISTSIZE|히스토리 파일에 저장되는 명령어의 개수|
        |HISTFILESIZE|히스토리 파일 크기|
        |MAIL|메일이 저장되는 경로|
        |TMOUT|로그인후 일정 작업이 없을시 로그아웃되는 시간|
        |UID|사용자의 UID|

    4. 환경 변수의 사용 및 변경
        - $ mkdir $HOME/data : 해당 사용자 홈 디렉토리 안에 data 디렉터리 생성      

        - PATH변수에 $HOME/data 경로 추가                             

            ![mkdir](https://user-images.githubusercontent.com/93310395/224016698-ec867b43-fb7a-405f-843f-727ae4495a4c.JPG)

              * mkdir : 디렉터리 만들기

        - 설정된 프롬프트를 확인 후 변경
            - 주요 프롬프트 형식
           
            |형  식|설명|
            |------|---|
            |\d|'요일 월 일' 형테로 날짜 표시(Wed Jan 15)|
            |\h|호스트명 표시|
            |\s|사용중인 셸이름 표시|
            |\t|24시 형태의 현재시간 표시(HH:MM:SS)|
            |\T|12시 형태의 현재시간 표시(HH:MM:SS)|
            |\@|12시 형태의 현재 시간에 AM/PM을 추가로 표시|
            |\u|현재 사용자명|
            |\w|현재 작업 디렉터리 절대 경로 표시|
            |\W|현재 작업 디렉터리 중 마지막 디렉터리만 표시|
            |\ !|현재 명령의 히스토리 넘버 표시|
            |\ \|\를 표시| 
        
        EX) 
        - 유저이름@24시간 형태시간, 마지막 디렉터리만 표시  

          ![ps1](https://user-images.githubusercontent.com/93310395/224018049-73a85513-9f2a-4754-b0b3-8f8f7c10f83b.jpg)
