# PART1 리눅스 실무의 이해[CHAPTER03 네트워크의 이해]


<br>


### 3.1 네트워크의 기초

#### 3.1.3 프로토콜(Protocol)
    
- 프로트콜의 개요
    - 컴퓨터 상호간에 통신을 위해 정해놓은 통신규칙이자 통신규약
    - 프로토콜의 기본 구성요소 3가지

            |구성요소|설명|
            |---|---|
            |구문(Syntax)|데이터의 구조나 형식|
            |의미(Sematics)|전송의 조작이나 오류 제어를 위한 제어 정보|
            |순서(Timing)|접속되어 있는 개체 간의 통신 속도의 조정이나 메시지의 순서 제어|

- 프로트콜의 기능
    - 주소 지정 : 전송할 경우 상대의 주소를 알아야 함 
    - 순서 지정 : 순서에 맞는 전달을 통해 흐름제어, 오류 제어
    - 단편화와 재조합
    - 흐름제어 
    - 오류제어
    - 동기화 : 데이터 전송 시 타이머 값, 윈도우 크기 등의 인자값 일치
    - 멀티플렉싱 : 하나의 통신 선로에서 다중 시스템 통신
    - 전송 서비스 : 우선순위 결정, 서비스 등급 등
    - 캡슐화

- 프로토콜 제정 기관
    - ISO, IEEE, ANSI, EIA, ITU-T

- TCP/IP 
   - TCP/IP의 개요
    - TCP : IP프로토콜에 의해 만들어진 패킷들의 전송 흐름 담당
    - IP : 전송 자료 패킷화, 목적지 주소를 저장한 뒤 전송
   
   - TCP/IP 구조 및 종류
    - TCP/IP 계층과 관련 프로토콜
    
        |계층|프로토콜|
        |---|---|
        |응용 계층|HTTP, SMTP, POP3, DNS, NFS 등|
        |전송 계층|TCP, UDP 등|
        |인터넷 계층|IP(V4,V6),ICMP 등|
        |네트워크 인터페이스 계층|이너텟, 토큰링 등|
    
    - 네트워크 인터페이스 계층
        - 이더넷 카드 등으로 연결된 물리적인 네트워크 
    
    - 인터넷 계층
        - 전송 계층에서 받은 패킷을 목적지까지 효율적으로 전달
        - IP 
            - OSI 네트워크 계층에서 호스트의 주소 지정, 패킷 분할 및 조립 기능 담당
            - 데이터 세그먼트를 패킷으로 만들어 전송
            - 비신뢰성, 비연결형
        - ICMP
            - 메세지에 대한 오류 보고와 이에 대한 피드백 호스터에게 보고하는 역할
            - IP패킷형태로 전달, ping 멸령 사용
        - ARP 
            - 동적으로 특정 프로토콜 의해서 필요시 목적지 호스트의 하드웨어 주소를 찾는 역할
    
    - 전송계층
        - 응용 계층으로부터 받은 데이터를 세그먼트 형태로 만들어 네트워크를 통해 수신자에게 전달
        - TCP(Transmission Control Protocol)
            - 연결지향 전송 프로토콜
            - 패킷의 오류 점검, 재전송 요구
            - 네트워크 상에 최단 경로를 찾아 1:1 연결 >> 전송과 오류수정 신뢰성 높음, 긴 데이터 전송 시간
        - UDP(User Datagram Protocol)
            - 비연결 전송 프로토콜, 세그먼트 전송만하고 응답은 받지 않음
            - 전송 완료 확인, 오류 수정 없음            
    
    - 응용계층
        - 네트워크로 연결된 프로세스간의 통신 접속을 위해 설계된 통신 프로트콜과 방식을 위해 만들어진 추상 계층
        - 전송 계층을 이용 호스트간의 연결 확립이 주역할

- OSI 7계층
    
    ![image](https://user-images.githubusercontent.com/93310395/235340830-fc242561-2d60-4991-ba65-b70bbe63380c.png)


- 1계층 : 물리계층(Physical)
    - 비트 정보를 회선에 내보내기 위한 변환이나 기계적 작업 계층
    - 전송 단위: Bit 
    - e.g. RS-232C, RS 449/442/423, V24, X21 케이블, 리피터, 허브

- 2계층 : 데이터링크 계층(Data Link)
    - 상대방과 물리적인 송수신을 위한 통신로 
    - 순서 제어, 흐름 제어, 오류 검출 및 수정(BEC, FEC)
    - 전송 단위: Frame
    - e.g. HDLC, LAP-B, LLC, PPP, 브릿지, L2스위치

- 3계층 : 네크워크 계층(Network)
    - Logical address를 담당하고, 이동 경로 결정하는 계층
    - Routing을 통한 올바른 경로 선책, 트래픽 혼잡 제어, 패킷의 분할 및 병합 등
    - 전송 단위 : Packet, 예)IP, IPX, X25

- 4계층 :전송 계층(Transport)
    - 연결 설정 유지 및 오류 복구와 흐름 제어 등을 통해 신뢰성 있는 통신 제공
    - 패킷 처리를 어느 사용자/프로그램에 맡겨야 하는지 식별 포트번호 사용
    - 단위 : Message, 예 : TCP, UDP 단위 : segment, datagram

- 5계층 : 세션 계층(Session)
    - 네트워크 상에서 통신할 경우 host간에 최초 연결
    - 응용 프로그램 사이의 접속 설정 및 유지, 종료에 대한 세션관리
    - 데이터의 전송 순서 및 동기점의 위치제공
    - 7, 6, 5계층을 통해 data 생성

- 6계층 : 표현계층(Presentation)
    - 전송하는 데이터의 표현방식을 결정하는 계층
    - Application 이 다루는 정보를 통신에 알맞은 형태로 만들거나, 하위 계층 (Session Layer) 에서 온 데이터를 사용자가 이해 할 수 있는 형태로 만드는 일
    - 암호화, 압축 : MPEG, ASCII, EBCDIC, JPEG, GIF, TIFF 등

- 7계층 : 응용 계층(Application)
    - 사용자 인터페이스의 역할을 담당하는 계층
    - 사용자 가장 가까운 프로토콜 ; HTTP, FTP, Telnet, SMTP 등

- 프로토콜 데이터 단위
    - PDU(Protocol Data Unit) : 프로토콜 데이터 단위
        - 프레임, 패킷, 세그먼트 등 해당
        - PCI, SUD로 구성
            - PCI :헤더 정보를 의미하는 발신지 주소, 순서 번호등, 오류 검출용 FCS(Frame Check Sequence) 포함

    - SDU(Service Data Unit): 서비스 데이터 단위
        - 두 통신 계층 간의 전달되는 실제 교환 되는 데이터 단위량 


    - 프로트콜 번호 
        - 프로토콜 정보는 번호를 사용하여 데이터그램 헤더 안에 적어서 전송
        - 리눅스 및 유닉스 : '/etc/protocols'에서 번호 확인 가능

    - 포트 번호 
        - IP프로토콜에 의해 전달된 데이터는 전송 계층에서 서비스 다중화를 위헤 포트로 관리
        - 0~1023 : 잘 알려진 포트(Well-Known Port)
            - 포트 번호들을 가장 범용적인 TCP/IP 어플리케이션을 위해 번호를 예약
        - 리눅스 및 유닉스 : 'etc/services'에서 확인 가능
        - 포트 번호와 주요 프로토콜 

            |포트|TCP|UDP|설명|
            |---|---|---|---|
            |20|TCP||FTP (파일 전송 프로토콜) - 데이터 포트공식|
            |21|TCP||FTP - 제어 포트(연결 시 인증과 컨트롤을 위한 포트)공식|
            |22|TCP||SSH (Secure Shell) - ssh scp, sftp같은 프로토콜 및 포트 포워딩공식|
            |23|TCP||텔넷 - 인터넷을 통하여 원격지의 호스트 컴퓨터에 접속할 때 사용공식|
            |25|TCP||SMTP (Simple Mail Transfer Protocol) - 이메일 전송에 사용|
            |53|TCP|UDP|DNS(Domain Name System)|
            |110|TCP||POP3 (Post Office Protocol version 3) - 전자우편 가져오기에 사용|
            |143|TCP||IMAP4 (인터넷 메시지 접근 프로토콜 4) - 이메일 가져오기에 사용|
            |161||UDP|SNMP (Simple Network Management Protocol) - Agent 포트|
            |443|TCP||HTTPS - SSL 위의 HTTP (암호화 전송)|
  
        - 소켓
            - 네트워크 관련 프로그램들은 데이터 통신을 위해 소켓을 생성하고 소켓을 통해 데이터 교환
            - 인터텟 프로토콜, 로컬 시스템의 IP 주소, 포트 번호 구성
            
